{"version":3,"names":["defaulProps","style","textStyle","onTimes","_seconds","onPause","onEnd","interval","hours","minute","seconds","currentSeconds","TimerComponent","React","forwardRef","props","ref","initialSeconds","fontFamily","autoStart","formatTime","key","setKey","useState","Math","random","useImperativeHandle","start","pause","resume","stop","timer","useCallback","BackgroundTimer","setInterval","initTime","iSeconds","times","init","clear","clearInterval","useEffect","font","renderTimer","styles","text","toString","length","defaultProps"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-bitwise */\nimport React, {\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { View, Text } from 'react-native';\nimport { styles } from './styles';\nimport type { TimerProps } from './model';\nimport BackgroundTimer from 'react-native-background-timer';\n\nconst defaulProps = {\n  style: {},\n  textStyle: {},\n  onTimes: (_seconds: number) => {},\n  onPause: (_seconds: number) => {},\n  onEnd: (_seconds: number) => {},\n};\n\nlet interval: any = null;\nlet hours = 0;\nlet minute = 0;\nlet seconds = 0;\nlet currentSeconds = 0;\n\nconst TimerComponent = React.forwardRef<any, TimerProps>((props, ref) => {\n  const {\n    initialSeconds = 0,\n    style,\n    textStyle,\n    fontFamily,\n    autoStart = false,\n    formatTime = 'hh:mm:ss',\n    onEnd,\n    onTimes,\n    onPause,\n  } = props;\n  const [key, setKey] = useState(Math.random());\n\n  useImperativeHandle(ref, () => {\n    return { start, pause, resume, stop };\n  });\n\n  const timer = useCallback(() => {\n    interval = BackgroundTimer.setInterval(() => {\n      currentSeconds = currentSeconds + 1;\n      if (seconds < 60) {\n        seconds = seconds + 1;\n      } else {\n        seconds = 0;\n        minute = minute + 1;\n      }\n      if (minute === 60) {\n        minute = 0;\n        hours = hours + 1;\n      }\n      if (onTimes) {\n        onTimes(currentSeconds);\n      }\n      setKey(Math.random());\n    }, 1000);\n  }, [onTimes]);\n\n  const initTime = useCallback((iSeconds: number) => {\n    if (iSeconds >= 3600) {\n      hours = ~~(iSeconds / 3600);\n      const times = iSeconds % 3600;\n      initTime(times);\n    } else {\n      if (iSeconds >= 60) {\n        minute = ~~(iSeconds / 60);\n        const times = iSeconds % 60;\n        initTime(times);\n      } else {\n        seconds = iSeconds;\n      }\n    }\n  }, []);\n\n  const init = useCallback(() => {\n    currentSeconds = 0;\n    hours = 0;\n    minute = 0;\n    seconds = 0;\n    if (initialSeconds > 0) {\n      initTime(initialSeconds);\n    }\n    clear();\n    setKey(Math.random());\n  }, [initTime, initialSeconds]);\n\n  const start = useCallback(() => {\n    init();\n\n    if (!interval) {\n      timer();\n    }\n  }, [init, timer]);\n\n  const pause = useCallback(() => {\n    clear();\n    if (onPause) {\n      onPause(currentSeconds);\n    }\n  }, [onPause]);\n\n  const resume = () => {\n    if (!interval) {\n      timer();\n    }\n  };\n\n  const stop = () => {\n    if (onEnd) {\n      onEnd(currentSeconds);\n    }\n\n    init();\n    setKey(Math.random());\n    clear();\n  };\n\n  const clear = () => {\n    if (interval) {\n      BackgroundTimer.clearInterval(interval);\n      interval = null;\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      pause();\n      init();\n      setKey(Math.random());\n    };\n  }, [init, pause]);\n\n  useEffect(() => {\n    if (initialSeconds > 0) {\n      init();\n    }\n    setKey(Math.random());\n  }, [init, initialSeconds]);\n\n  useEffect(() => {\n    if (autoStart) {\n      start();\n    }\n  }, [autoStart, initialSeconds, start]);\n\n  const font = () => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily,\n      };\n    } else {\n      return {};\n    }\n  };\n\n  const renderTimer = () => {\n    if (formatTime === 'hh:mm:ss') {\n      if (hours > 0) {\n        return (\n          <Text style={[styles.text, textStyle, font()]}>{`${hours}:${\n            minute.toString().length === 1 ? '0' : ''\n          }${minute}:${\n            seconds.toString().length === 1 ? '0' : ''\n          }${seconds}`}</Text>\n        );\n      } else {\n        if (minute > 0) {\n          return (\n            <Text style={[styles.text, textStyle, font()]}>{`${minute}:${\n              seconds.toString().length === 1 ? '0' : ''\n            }${seconds}`}</Text>\n          );\n        } else {\n          return (\n            <Text style={[styles.text, textStyle, font()]}>{`${seconds}`}</Text>\n          );\n        }\n      }\n    } else {\n      return (\n        <Text\n          style={[styles.text, textStyle, font()]}\n        >{`${currentSeconds}`}</Text>\n      );\n    }\n  };\n\n  return (\n    <View style={style} key={key}>\n      {renderTimer()}\n    </View>\n  );\n});\n\nTimerComponent.defaultProps = defaulProps;\n\nexport default TimerComponent;\n"],"mappings":"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"}